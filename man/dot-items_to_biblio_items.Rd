% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/interface.R
\name{.items_to_biblio_items}
\alias{.items_to_biblio_items}
\title{Enrich items with creator data for bibliography generation}
\usage{
.items_to_biblio_items(connection, items)
}
\arguments{
\item{connection}{Database connection or pool}

\item{items}{Data frame of item records (from database)}
}
\value{
Data frame with original items plus list-columns for each personlist_type
}
\description{
Takes a data frame of items and joins in all associated creator data from
personlists and item_persons, organized by personlist_type (author, editor, etc.).
}
\details{
Complex enrichment workflow:
\enumerate{
\item Extract just item_ids from items data frame
\item Join personlists to get personlist metadata (type, id)
\item Group personlists by personlist_type (author, editor, etc.)
\item For each type, join item_persons to get creator details
\item Group item_persons by item_id within each type
\item Create list-columns containing creator data frames for each item+type
\item Full join all type-specific data back together
\item Left join to original items to preserve all item data
}

Result has structure: items table columns + list-columns named by personlist_type
(e.g., \code{author} column contains data frame of authors for each item).
}
\note{
Uses multiple poolCheckout/poolReturn cycles for each personlist_type join.
Handles empty personlists gracefully (items without creators). This is the
most complex function in the bibliography pipeline.
}
\keyword{internal}
