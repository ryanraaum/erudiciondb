% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/interface.R
\name{.destage_one}
\alias{.destage_one}
\title{Deactivate an object revision by setting stage to -1}
\usage{
.destage_one(connection, object)
}
\arguments{
\item{connection}{Database connection or pool}

\item{object}{The object to deactivate (must have object_type, object_id, and revision)}
}
\value{
Logical: TRUE if exactly one row was updated, FALSE otherwise
}
\description{
Marks a specific revision of an object as inactive (stage = -1). Used as part
of the update workflow to preserve audit trail while activating a new revision.
}
\details{
Updates the stage field from 0 (active) to -1 (inactive) for the specified
object revision. The WHERE clause matches on both object_id AND revision to
ensure only the intended revision is affected.

Old revisions are kept with stage=-1 for audit trail purposes rather than being
deleted. This preserves the complete history of all changes to an object.
}
\note{
Part of the revision tracking system. Typically called by \code{.update_object()}
as part of a transaction. Returns FALSE if no rows matched (object not found
or already destaged).
}
\keyword{internal}
