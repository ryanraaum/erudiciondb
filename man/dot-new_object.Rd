% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/interface.R
\name{.new_object}
\alias{.new_object}
\title{Create new database object with validation and augmentation}
\usage{
.new_object(
  connection,
  object_type,
  object,
  validate_function = NULL,
  augment_function = NULL,
  stage = 0
)
}
\arguments{
\item{connection}{Database connection or pool}

\item{object_type}{Type of object (singular form: "item", "person", etc.)}

\item{object}{List containing object data (partial or complete)}

\item{validate_function}{Optional validation function to check object integrity}

\item{augment_function}{Optional augmentation function to enrich object data}

\item{stage}{Activation stage (0 = active, -1 = inactive, default: 0)}
}
\value{
List containing the complete, validated, and augmented object with:
\itemize{
\item All table columns present (missing fields filled with NA)
\item Generated UUID for object_id
\item object_type field set
\item revision set to 1
\item stage set to specified value
}
}
\description{
Takes a partial object specification, fills in missing fields with NA, generates
IDs and metadata, then runs validation and augmentation functions. This is the
entry point for all object creation in ErudicionDB.
}
\details{
The function follows the validator-augmentor pattern:
\enumerate{
\item Validates all provided fields exist in the target table schema
\item Fills missing fields with NA based on table schema
\item Adds metadata: object_type, UUID, revision (1), stage
\item Runs validator function (if provided) - throws error on failure
\item Runs augmentor function (if provided) - transforms/enriches data
}
}
\note{
Object is NOT inserted into database - use \code{.insert_one()} or
\code{.insert_new_object()} for that. The object_type field must match a valid
table name (pluralized: "items", "persons", etc.).
}
\keyword{internal}
